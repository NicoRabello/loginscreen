<%@ page import="java.io.FileInputStream"%><jsp:useBean id="DBBeanId" scope="page"class="docman.DBBean" /><%  // the tags constructs above are intentional  String objectId = request.getParameter("id");  String userName =    DBBeanId.getCookie(request, "userName");  String password =    DBBeanId.getCookie(request, "password");  if (userName==null || password==null)    response.sendRedirect("Login.html");  // 'userName' and 'password' cookies are found  // now let's see if user has access to the file  String filename = DBBeanId.getFilename(objectId,    userName, password);  if (filename==null)    response.sendRedirect("Login.html");  response.setContentType(    "APPLICATION/OCTET-STREAM");  response.setHeader("Content-Disposition",    "attachment; filename=\"" + filename + "\"");  String dataPath = DBBeanId.getDataPath();  FileInputStream fileInputStream =    new FileInputStream(dataPath + objectId);  int i;  while ((i=fileInputStream.read()) != -1)    out.write(i);  fileInputStream.close();  out.close();%>